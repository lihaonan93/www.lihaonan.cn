---
title: nohup输出日志到指定文件
date: 2023-03-24 12:38:35
permalink: /pages/ddcca0/
categories:
  - Linux
  - 系统管理
tags:
  - 
---
当我们在使用Shell或者终端时，有时候需要在后台运行某个程序或者脚本，这时候就需要使用`nohup`命令。

`nohup`命令可以让程序在后台运行，避免程序因为用户注销或终端断开而被中止，同时也可以将输出结果保存到指定文件中。

下面是使用`nohup`命令在后台运行程序的步骤：

1. 执行以下命令，将程序放在后台运行：

   ```bash
   nohup COMMAND [ARG]... &
   ```

   这里的`COMMAND`表示要执行的程序，`ARG`表示程序的参数。`&`符号表示让进程在后台运行。

2. 将程序的标准输出和标准错误输出重定向到指定文件中，以便后续查看程序运行的输出情况。

   - 如果只需要将标准输出重定向到文件中，可以使用以下命令：

     ```bash
     nohup COMMAND [ARG]... > output.txt &
     ```

     这里的`output.txt`表示要保存标准输出的文件名。

   - 如果需要将标准输出和标准错误输出一起重定向到文件中，可以使用以下命令：

     ```bash
     nohup COMMAND [ARG]... > output.txt 2>&1 &
     ```

     这里的`2>&1`表示将标准错误输出重定向到标准输出中，然后再将标准输出重定向到指定文件中。

     ::: warning
        `>`和`2>&1`符号的顺序不能颠倒，否则会出现意想不到的结果。
     :::

3. 执行完上述步骤后，程序就会在后台运行，并将输出结果保存在指定文件中。可以通过`ps`命令查看程序的运行状态，通过`kill`命令终止程序的运行。

::: danger
一定要使用`&`符号将程序放在后台运行，否则程序将在前台运行，终端退出时程序也会退出。另外，建议在使用`nohup`命令时总是将输出重定向到文件中，以便后续查看程序运行的输出情况。
:::
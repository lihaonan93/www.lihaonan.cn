---
title: PHP-5.6.40 Dockerfile
date: 2023-03-23 20:32:42
permalink: /pages/1b9c73/
categories:
  - Linux
  - PHP
tags:
  - 
---
```bash
FROM php:5.6.40-fpm

COPY ./php.ini /usr/local/etc/php/php.ini
COPY ./php-fpm.conf /usr/local/etc/php-fpm.conf
COPY ./jyf.so    /usr/local/lib/php/extensions/no-debug-non-zts-20131226/

RUN echo 'deb http://mirrors.tencentyun.com/debian-archive/debian stretch main' > /etc/apt/sources.list \
    && echo 'deb http://mirrors.tencentyun.com/debian-archive/debian stretch-backports main' >> /etc/apt/sources.list \
    && echo 'deb http://mirrors.tencentyun.com/debian-archive/debian stretch-backports-sloppy main' >> /etc/apt/sources.list \
    && echo 'deb http://mirrors.tencentyun.com/debian-archive/debian stretch-proposed-updates main' >> /etc/apt/sources.list \
    && echo 'deb http://mirrors.tencentyun.com/debian-archive/debian-security stretch/updates main'  >> /etc/apt/sources.list \
    && apt-get update \
    && apt-get install -y vim 

RUN curl -L -o /usr/local/bin/install-php-extensions https://ghproxy.com/https://github.com/mlocati/docker-php-extension-installer/releases/latest/download/install-php-extensions \
    && chmod +x /usr/local/bin/install-php-extensions \
    && install-php-extensions @composer redis swoole @fix_letsencrypt gd mysql mysqli pdo_mysql \
        mcrypt ldap xmlrpc bcmath calendar shmop soap sockets sysvsem zip pcntl

RUN curl -L -o /tmp/phalcon-v2.0.13.tar.gz https://ghproxy.com/https://github.com/phalcon/cphalcon/archive/refs/tags/phalcon-v2.0.13.tar.gz \
    &&  tar xf /tmp/phalcon-v2.0.13.tar.gz -C /tmp \
    &&  cd /tmp/cphalcon-phalcon-v2.0.13/build \
    &&  ./install \
    && docker-php-ext-enable phalcon \
    && echo 'extension=jyf.so' > /usr/local/etc/php/conf.d/jyf.ini \
    && rm -rf /tmp/* \
    && mkdir /var/log/php \
    && chown www-data:www-data /var/log/php

WORKDIR /usr/local/etc

EXPOSE 9000

CMD [ "php-fpm", "-F", "-y", "/usr/local/etc/php-fpm.conf" ]

```

